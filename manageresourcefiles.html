<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Falaise: Manage resource files in Falaise</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Falaise
   &#160;<span id="projectnumber">3.2.0</span>
   </div>
   <div id="projectbrief">SuperNEMO Software Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Manage resource files in Falaise </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#manageresourcefiles_intro">Introduction to resource files </a></li>
<li class="level1"><a href="#manageresourcefiles_resourcefilesdirectory">Resource files directory </a></li>
<li class="level1"><a href="#manageresourcefiles_resourcefileregistration">Resource file registration </a></li>
<li class="level1"><a href="#manageresourcefiles_resourcefilepathinfalaise">Resource file path in Falaise </a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="manageresourcefiles_intro"></a>
Introduction to resource files </h1>
<p>Each version of Falaise is delivered with a set of resource files, stored from the <code>resources/</code> source directory.</p>
<p>A resource file is typically a <em>configuration file</em> used by the simulation or the reconstruction pipeline to setup some specific components of the data processing software chain. It may also consist in a <em>data</em> file that must be loaded at program startup to initiate some algorithms or functionalities.</p>
<p>Most of the configuration files published in Falaise use a text format compatible with the <code><a class="elRef" doxygen="https://supernemo-dbd.github.io/Bayeux/bayeux.doxy.tag:https://supernemo-dbd.github.io/Bayeux/" href="https://supernemo-dbd.github.io/Bayeux/classdatatools_1_1properties.html">datatools::properties</a></code> or <code><a class="elRef" doxygen="https://supernemo-dbd.github.io/Bayeux/bayeux.doxy.tag:https://supernemo-dbd.github.io/Bayeux/" href="https://supernemo-dbd.github.io/Bayeux/classdatatools_1_1multi__properties.html">datatools::multi_properties</a></code> classes provided by the Bayeux library.</p>
<h1><a class="anchor" id="manageresourcefiles_resourcefilesdirectory"></a>
Resource files directory </h1>
<p>The resources/ source directory is located at the root of the Falaise's source tree. After installation, the resources files will be stored from the ̀̀{Falaise install path}/share/Falaise-{falaise version}/resources/`` path.</p>
<p>The resources/ source directory is organized by topics : configuration files, examples, tags (URN management). Each time a new resource file has to be published, it must be stored in the relevant subdirectory.</p>
<p>For example, the <code>config/snemo/demonstrator/geometry/4.0/manager.conf</code> file is the top configuration file for the SuperNEMO demonstrator's virtual geometry model identified with the tag <code>4.0</code>. Should one add an improved geometry model typically tagged <code>4.1</code>, it would make sense to store its new main configuration file as: <code>config/snemo/demonstrator/geometry/4.1/manager.conf</code>.</p>
<p>Usually, building a new configuration for a given application (simulation, reconstruction...) or service (geometry...) in Falaise implies publishing several new resource files at the same time. Developers or experts of the new functionality have to populate the relevant files in specific possibly new subdirectories.</p>
<h1><a class="anchor" id="manageresourcefiles_resourcefileregistration"></a>
Resource file registration </h1>
<p>Once stored in the <code>resources/</code> source directory, the new files must be registered in Falaise. Falaise provides a dedicated script to generate automatically the list of all resource files that are part of a given release: the <code>resources/_BuildResourceList.sh</code> script. This script must be run every time a resource file is added in or removed from the <code>resources/</code> source directory. It builds the updated official list of resource files associated to a given Falaise release. This list is stored in the <code>resources/_resources.cmake</code> file which in turn is read by CMake during the build &amp; installation process.</p>
<p>Note that files of which the names start with an underscore (example: <code>_foo.txt</code>) are <em>not</em> registered in the official list of resource files. This convention enables to store in the <code>resources/</code> directory some files that are not intended to be published but only used by experts during the development process.</p>
<p>Details are given in the <code>resources/_README_DEVELOPERS.rst</code> file.</p>
<h1><a class="anchor" id="manageresourcefiles_resourcefilepathinfalaise"></a>
Resource file path in Falaise </h1>
<p>Falaise has a special mechanism to automatically locate the installation path of any resource file. A special syntax is used to describe the path of a resource file relatively to the resource installation top directory. The syntax simply uses the <code>@falaise:</code> prefix in front of the relative path of the resource file. The <code><a class="elRef" doxygen="https://supernemo-dbd.github.io/Bayeux/bayeux.doxy.tag:https://supernemo-dbd.github.io/Bayeux/" href="https://supernemo-dbd.github.io/Bayeux/namespacedatatools.html#a7a0118cfe0a1d68a9f2c0eb0fe37d0c8">datatools::fetch_path_with_env(std::string  &amp;)</a></code> function, provided by Bayeux, is used to resolve the real installation path of the file. Essentially, this prefix acts as an environment variable storing the installation path of the resource file directory.</p>
<p>Example: the real path of the main configuration file of the SuperNEMO geometry model tagged 4.0 can be addressed with the following string: <code>"@falaise:config/geometry/snemo/demonstrator/3.0/manager.conf"</code> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
