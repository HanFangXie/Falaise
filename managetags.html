<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Falaise: Manage tags in Falaise</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Falaise
   &#160;<span id="projectnumber">3.2.0</span>
   </div>
   <div id="projectbrief">SuperNEMO Software Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Manage tags in Falaise </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#managetags_intro">Introduction to tags </a></li>
<li class="level1"><a href="#managetags_tagcategories">Tag categories </a></li>
<li class="level1"><a href="#managetags_tagregistration">Tag registration </a></li>
<li class="level1"><a href="#managetags_tagdependencies">Tag dependencies </a></li>
<li class="level1"><a href="#managetags_tagtofileresolver">Tag to file resolver </a></li>
<li class="level1"><a href="#managetags_fltags">The fltags  application  </a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="managetags_intro"></a>
Introduction to tags </h1>
<p>A tag is the unique identifier of an official configuration of the SuperNEMO experiment. Such a configuration may concern a specific geometry model, the version of a software component, a model of the experiment in the context of the Monte Carlo simulation, an assembly of data processing modules for the reconstruction pipeline, a special hardware setup for data collection runs... A tag can also be used to identify some specific set of resources provided by/stored in a unique resource file.</p>
<p>Tag are thus associated to some <em>logical entities</em>. The tag does not provide the address, if any, of the tagged entity it is associated to. However, a tag <b>may</b> be associated to some concrete resource (i.e. a file). The real location of such a resource must be provided by a <em>resolver</em> tool, when this makes sense. Such a location can be the path of a resource file in the Falaise installation directory. It can be an URL to be accessed through a network, using a specific protocol.</p>
<p>A tag is implemented through the URN concept (see <a href="https://fr.wikipedia.org/wiki/Uniform_Resource_Name">https://fr.wikipedia.org/wiki/Uniform_Resource_Name</a>). An URN is a simple character string which uses the <b>urn</b> scheme.</p>
<p>Example: the "urn:snemo:demonstrator:setup:1.0" tag is associated to a specific model of the SuperNEMO demonstrator experiment, including its geometry model and possibly the configuration of the electronics, the database, the control and monitoring system. The "urn:snemo:demonstrator:setup:1.0" tag is thus <b>unique</b>. Once the model of the experiment, built as the assembly of several core components, is represented in the Falaise library and/or companion tools, its unique tag is officially published. The relationship between a specific setup and its tag is bijective. This is a strict rule that must be applied during the full lifecycle of the experiment.</p>
<h1><a class="anchor" id="managetags_tagcategories"></a>
Tag categories </h1>
<p>As mentioned above, a tag is associated to a logical entity, i.e. something that makes sense to remember, store, associate to some other entities.</p>
<p>A tag must be associated to a <b>category</b>. A category is represented by a simple character string which identify a concept or topic. Falaise supports several tag categories:</p>
<ul>
<li><p class="startli"><code>experiment</code> : this category is used to address a specific experiment.</p>
<p class="startli">Example: BiPo3, SuperNEMO demonstrator and ATLAS can be considered as experiments. It is thus possible to associate an unique tag/URN to each of these entities:</p><ul>
<li>Atlas: <code>"urn:atlas"</code></li>
<li>SuperNEMO Demonstrator: <code>"urn:snemo:demonstrator"</code></li>
<li>BiPo3: ``"urn:bipo3"</li>
</ul>
<p class="startli">An experiment entity provides the general context or framework used to operate a specific data processing.</p>
</li>
<li><p class="startli"><code>geosetup</code> : this category is associated to any <em>geometry model/setup</em>.</p>
<p class="startli">Example: the SuperNEMO Demonstrator experiment may have distinct geometry models which can be chosen from an offical list (this is a mock example):</p><ul>
<li>Simple and naive geometry : <code>"urn:snemo:demonstrator:geometry:1.0"</code></li>
<li>R&amp;D model : <code>"urn:snemo:demonstrator:geometry:2.0"</code></li>
<li>Idealised geometry : <code>"urn:snemo:demonstrator:geometry:4.0"</code></li>
<li>Improved geometry model (but still approximated) : <code>"urn:snemo:demonstrator:geometry:4.2"</code></li>
<li>Realistic geometry of the detector : <code>"urn:snemo:demonstrator:geometry:5.0"</code></li>
<li>Realistic geometry of the detector including a realistic model of the detector's environment : <code>"urn:snemo:demonstrator:geometry:5.2"</code></li>
</ul>
<p class="startli">Depending on the context and the goal to be reached, the user can choose any of these list of geometry setups to operate some data processing (simulation, reconstruction...).</p>
</li>
<li><p class="startli"><code>expsetup</code> : this category is associated to a model of the full <em>experimental setup</em>. An experimental setup generally includes:</p><ul>
<li>a specific geometry model</li>
<li>a specific configuration of the electronics, trigger system and DAQ</li>
<li>a specific configuration of the control and monitoring system</li>
<li>a specific configuration of various companion services (database...)</li>
</ul>
<p class="startli">As an assembly of more fondamental entities, a specific experimental setup is expected to depends on its components. An experimental setup is associated to its unique tag. This tag automatically implies the tags (if any) of the components.</p>
<p class="startli">Example: the configuration of the SuperNEMO Demonstrator experimental setup during the commissioning phase of the experiment is tagged : <code>"urn:snemo:demonstrator:setup:0.2"</code>. It implies the core components with the following list of tags (this is a mock example):</p><ul>
<li><code>"urn:snemo:demonstrator:geometry:5.0"</code></li>
<li><code>"urn:snemo:demonstrator:electronics:0.9-com"</code></li>
<li><code>"urn:snemo:demonstrator:cms:0.1"</code></li>
<li><code>"urn:snemo:demonstrator:db:0.3"</code></li>
</ul>
<p class="startli">Any change in the setup of at least one component implies a new experimental setup and thus a new tag of the <code>expsetup</code> category.</p>
</li>
<li><code>simsetup</code> : this category is associated to a <em>simulation setup</em></li>
<li><code>recsetup</code> : this category is associated to a <em>reconstruction setup</em></li>
<li><code>services</code> : this category is associated to the configuration of a <em>service management system</em></li>
<li><code>configuration</code> : the category associated to the configuration of some generic system or service which is not classified/specialized as the category listed above</li>
<li><code>variants</code> : the category associated to the configuration of a <em>variant service</em></li>
<li><code>varprofile</code> : the category associated to a <em>variant profile</em>.</li>
</ul>
<h1><a class="anchor" id="managetags_tagregistration"></a>
Tag registration </h1>
<p>When a tag is publised as the offical and unique identifier of some entity used within Falaise, it must be registered in a special database. A dedicated <em>URN database service</em> is provided by the Falaise library to manage the registration of all tags used in the library.</p>
<p>Practically, tags are described in files stored in the <code>resources/urn/db/</code> source directory. A new URN entry must be added in one of the existing files from this directory in order to update the list of published tags. Eventually, additional files can be added to address some new categories of tags. These files are named <em>URN DB files</em>. They use the <code><a class="elRef" doxygen="https://supernemo-dbd.github.io/Bayeux/bayeux.doxy.tag:https://supernemo-dbd.github.io/Bayeux/" href="https://supernemo-dbd.github.io/Bayeux/classdatatools_1_1multi__properties.html">datatools::multi_properties</a></code> format.</p>
<p>As a minimum, a tag record provides the URN of the tag, its category and a short description of the entity identified by the tag. It can also contains other informations such as the dependees of the entity, addressed by topic (see below).</p>
<p>The <code>resources/urn/db/snemo_setup_db.conf</code> files defines the full list of tag registration <em>URN DB</em> files to be loaded when the Falaise library starts.</p>
<h1><a class="anchor" id="managetags_tagdependencies"></a>
Tag dependencies </h1>
<p>TBD</p>
<h1><a class="anchor" id="managetags_tagtofileresolver"></a>
Tag to file resolver </h1>
<h1><a class="anchor" id="managetags_fltags"></a>
The fltags  application  </h1>
<p>Print usage : </p><div class="fragment"><div class="line">$ fltags --help</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
